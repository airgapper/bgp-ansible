filter atr_in
{
    scrub_communities(trusted);
    if net = 2607:fae0:245::/48 then {
        bgp_large_community.add((15562,0,1));
        accept;
    }
    reject;
}

filter tardis_in
{
    if net ~ [ 2001:67c:208c:10::/64, 2001:728:1808:1::20/126 ] then accept;
    reject;
}

filter ircd_in
{
    if ( net = 2001:728:1808:2::132/128 ) then accept;
    reject;
}

define TRANSIT_FREE_ASNS = [
{% for asn in bgp_params['transit_free_asns'] %}
     {{ asn }}{%- if not loop.last -%},{% endif %}

{% endfor %}
];

function reject_transit_paths()
int set transit_asns;
{
     transit_asns = TRANSIT_FREE_ASNS;
     if (bgp_path ~ transit_asns) then {
         print "Reject: Transit Free ASNs found downstream: ", net, " ", bgp_path;
         reject;
     }
}
